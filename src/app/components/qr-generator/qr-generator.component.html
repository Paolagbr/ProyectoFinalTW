<div class="qr-container">
  <div class="card">
    <div class="card-header">
      <h2>C贸digo QR de tu Cita</h2>
      <p class="subtitle">Presenta este c贸digo en tu cita del SPA</p>
    </div>

    <div class="card-body">
      <!-- Loading State -->
      <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>Generando c贸digo QR...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !loading" class="error-state">
        <div class="error-icon">锔</div>
        <p>{{ error }}</p>
        <button (click)="generarQR()" class="btn-retry">Reintentar</button>
      </div>

      <!-- Success State -->
      <div *ngIf="qrCodeDataURL && !loading && !error" class="qr-content">
        <!-- QR Code -->
        <div class="qr-code-container">
          <img [src]="qrCodeDataURL" alt="C贸digo QR de la cita" class="qr-image">
        </div>

        <!-- Cita Information -->
        <div *ngIf="citaData" class="cita-info">
          <h3>Informaci贸n de tu Cita</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Cliente:</span>
              <span class="value">{{ citaData.cliente }}</span>
            </div>
            <div class="info-item">
              <span class="label">Servicio:</span>
              <span class="value">{{ citaData.servicio }}</span>
            </div>
            <div class="info-item">
              <span class="label">Fecha:</span>
              <span class="value">{{ citaData.fecha }}</span>
            </div>
            <div class="info-item">
              <span class="label">Hora:</span>
              <span class="value">{{ citaData.hora }}</span>
            </div>
            <div class="info-item">
              <span class="label">C贸digo:</span>
              <span class="value code">{{ citaData.codigoConfirmacion }}</span>
            </div>
            <div class="info-item">
              <span class="label">V谩lido hasta:</span>
              <span class="value">{{ citaData.validoHasta | date:'short' }}</span>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="actions">
          <button (click)="regenerarQR()" class="btn-secondary">
             Regenerar QR
          </button>
          <button (click)="descargarQR()" class="btn-primary">
             Descargar QR
          </button>
        </div>

        <!-- Instructions -->
        <div class="instructions">
          <h4>Instrucciones:</h4>
          <ul>
            <li>Presenta este c贸digo QR al llegar a tu cita</li>
            <li>El c贸digo es v谩lido por 24 horas</li>
            <li>Puedes regenerar el c贸digo si es necesario</li>
            <li>Guarda una captura de pantalla como respaldo</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
